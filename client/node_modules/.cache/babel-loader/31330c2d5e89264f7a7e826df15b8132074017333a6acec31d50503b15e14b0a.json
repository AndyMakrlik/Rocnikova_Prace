{"ast":null,"code":"import React from'react';import{Link}from\"react-router-dom\";import{useState}from\"react\";import axios from'axios';import{toast}from'react-hot-toast';import{useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CarAddFav=_ref=>{let{car,isFavourite:stateFavourite}=_ref;const[auth,jePrihlasen]=useState(false);const[isFavourite,setIsFavourite]=useState(stateFavourite);useEffect(()=>{axios.get('http://localhost:3001/check',{withCredentials:true}).then(res=>{if(res.data.Status===\"Success\"){jePrihlasen(true);}else{jePrihlasen(false);}});},[]);const formatDate=dateString=>{const date=new Date(dateString);return date.toLocaleString('cs-CZ',{day:'numeric',month:'numeric',year:'numeric'});};const handleHeartClick=async e=>{e.preventDefault();e.stopPropagation();if(!auth){toast.error(\"Musíte se nejdříve přihlásit.\");return;}try{if(!isFavourite){await axios.post('http://localhost:3001/favor',{carId:car.id,cena:car.cena},{withCredentials:true});toast.success(`${car.nazev} byl přidán do oblíbených.`);}else{await axios.delete(`http://localhost:3001/favor/${car.id}`,{withCredentials:true});toast.success(`${car.nazev} byl odebrán z oblíbených.`);}setIsFavourite(!isFavourite);}catch(err){console.error(\"Error updating favourites:\",err);}};return/*#__PURE__*/_jsx(Link,{to:`/car/${car.id}`,style:{textDecoration:'none',color:'inherit'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-5 align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xl-3 col-lg-3 col-sm-12\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"auto\",className:\"img-fluid\",src:car.obrazek})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-7 col-xl-3 col-lg-3 col-sm-7 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{border:'none',width:'100%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",style:{textAlign:'left'},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title fw-bold mb-3\",children:car.nazev}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle fw-semibold mb-3\",children:[car.rok_vyroby,\", \",Number(car.najete_km).toLocaleString('cs-CZ'),\" Km\"]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-3\",children:[car.vykon_kw,\" kW (\",Math.round(car.vykon_kw*1.341),\" ps)\"]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-3\",children:[car.karoserie,\", \",car.palivo,\", \",car.prevodovka]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-3\",children:[\"Lokace: \",car.kraj,\" kraj\"]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-xl-2 col-lg-2 col-sm-5 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{border:'none',width:'100%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title fw-bold\",style:{color:car.stav==='Aktivní'?'green':car.stav==='Rezervovaný'?'orange':car.stav==='Zrušený'?'red':'black'},children:car.stav}),/*#__PURE__*/_jsxs(\"h5\",{className:\"card-subtitle fw-semibold\",style:{marginBottom:70},children:[Number(car.cena).toLocaleString('cs-CZ'),\" K\\u010D\"]}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"40\",height:\"40\",fillRule:\"currentColor\",className:\"bi bi-heart\",viewBox:\"0 0 16 16\",fill:isFavourite?\"red\":\"currentColor\",onClick:handleHeartClick,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"path\",{d:\"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\"})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-xl-4 col-lg-4 col-sm-12\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:\"Cena p\\u0159i ulo\\u017Een\\xED:\"}),\" \",Number(car.cenaPriUlozeni).toLocaleString('cs-CZ'),\" K\\u010D\"]}),/*#__PURE__*/_jsxs(\"h5\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:\"Datum p\\u0159id\\xE1n\\xED:\"}),\" \",formatDate(car.datum_pridani)]})]})]})});};export default CarAddFav;","map":{"version":3,"names":["React","Link","useState","axios","toast","useEffect","jsx","_jsx","jsxs","_jsxs","CarAddFav","_ref","car","isFavourite","stateFavourite","auth","jePrihlasen","setIsFavourite","get","withCredentials","then","res","data","Status","formatDate","dateString","date","Date","toLocaleString","day","month","year","handleHeartClick","e","preventDefault","stopPropagation","error","post","carId","id","cena","success","nazev","delete","err","console","to","style","textDecoration","color","children","className","alt","src","obrazek","border","width","textAlign","rok_vyroby","Number","najete_km","vykon_kw","Math","round","karoserie","palivo","prevodovka","kraj","stav","marginBottom","xmlns","height","fillRule","viewBox","fill","onClick","cursor","d","cenaPriUlozeni","datum_pridani"],"sources":["C:/Users/denny/Documents/GitHub/Rocnikova_Prace/client/src/components/CarAddFav.js"],"sourcesContent":["import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport axios from 'axios';\r\nimport { toast } from 'react-hot-toast';\r\nimport { useEffect } from 'react';\r\n\r\nconst CarAddFav = ({ car, isFavourite: stateFavourite }) => {\r\n  const [auth, jePrihlasen] = useState(false);\r\n  const [isFavourite, setIsFavourite] = useState(stateFavourite);\r\n  \r\n  useEffect(() => {\r\n    axios.get('http://localhost:3001/check', { withCredentials: true })\r\n      .then(res => {\r\n        if (res.data.Status === \"Success\") {\r\n          jePrihlasen(true);\r\n        } else {\r\n          jePrihlasen(false);\r\n        }\r\n      })\r\n  }, []);\r\n\r\nconst formatDate = (dateString) => {\r\n  const date = new Date(dateString);\r\n  return date.toLocaleString('cs-CZ', {\r\n    day: 'numeric',\r\n    month: 'numeric',\r\n    year: 'numeric'\r\n  });\r\n};\r\n\r\n\r\nconst handleHeartClick = async (e) => {\r\n  e.preventDefault();\r\n  e.stopPropagation();\r\n\r\n  if (!auth) {\r\n    toast.error(\"Musíte se nejdříve přihlásit.\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    if (!isFavourite) {\r\n      await axios.post('http://localhost:3001/favor', { carId: car.id, cena: car.cena }, { withCredentials: true });\r\n      toast.success(`${car.nazev} byl přidán do oblíbených.`);\r\n    } else {\r\n      await axios.delete(`http://localhost:3001/favor/${car.id}`, { withCredentials: true });\r\n      toast.success(`${car.nazev} byl odebrán z oblíbených.`);\r\n    }\r\n    setIsFavourite(!isFavourite);\r\n  } catch (err) {\r\n    console.error(\"Error updating favourites:\", err);\r\n  }\r\n};\r\n    return (\r\n      <Link to={`/car/${car.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n      <div className='row mb-5 align-items-center'>\r\n        <div className='col-12 col-xl-3 col-lg-3 col-sm-12'>\r\n          <img alt='auto' className='img-fluid' src={car.obrazek}/>\r\n        </div>\r\n        <div className=\"col-7 col-xl-3 col-lg-3 col-sm-7 d-flex justify-content-center\">\r\n          <div className=\"card\" style={{ border: 'none', width: '100%' }}>\r\n            <div className=\"card-body\" style={{ textAlign: 'left' }}>\r\n              <h5 className=\"card-title fw-bold mb-3\">{car.nazev}</h5>\r\n              <h6 className=\"card-subtitle fw-semibold mb-3\">{car.rok_vyroby}, {Number(car.najete_km).toLocaleString('cs-CZ')} Km</h6>\r\n              <h6 className=\"card-subtitle mb-3\">{car.vykon_kw} kW ({Math.round(car.vykon_kw * 1.341)} ps)</h6>\r\n              <h6 className=\"card-subtitle mb-3\">{car.karoserie}, {car.palivo}, {car.prevodovka}</h6>\r\n              <h6 className=\"card-subtitle mb-3\">Lokace: {car.kraj} kraj</h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='col-5 col-xl-2 col-lg-2 col-sm-5 d-flex justify-content-center'>\r\n          <div className=\"card\" style={{ border: 'none', width: '100%' }}>\r\n            <div className=\"card-body\" style={{ textAlign: 'right' }}>\r\n              <h4 className=\"card-title fw-bold\" style={{ color: car.stav === 'Aktivní' ? 'green' : car.stav === 'Rezervovaný' ? 'orange' : car.stav === 'Zrušený' ? 'red' : 'black' }}>{car.stav}</h4>\r\n              <h5 className=\"card-subtitle fw-semibold\" style={{ marginBottom: 70 }}>{Number(car.cena).toLocaleString('cs-CZ')} Kč</h5>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" fillRule=\"currentColor\" className=\"bi bi-heart\" viewBox=\"0 0 16 16\" fill={isFavourite ? \"red\" : \"currentColor\"} onClick={handleHeartClick} style={{ cursor: 'pointer' }}>\r\n                <path d=\"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='col-12 col-xl-4 col-lg-4 col-sm-12'>\r\n          <h5 className='mb-5'><span className='fw-bold'>Cena při uložení:</span> {Number(car.cenaPriUlozeni).toLocaleString('cs-CZ')} Kč</h5>\r\n          <h5><span className='fw-bold'>Datum přidání:</span> {formatDate(car.datum_pridani)}</h5>\r\n        </div>\r\n      </div>\r\n      </Link>\r\n    );\r\n  };\r\nexport default CarAddFav;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}