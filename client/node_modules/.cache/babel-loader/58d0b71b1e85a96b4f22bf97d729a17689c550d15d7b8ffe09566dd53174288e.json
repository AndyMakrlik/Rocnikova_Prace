{"ast":null,"code":"import React from'react';import{Link}from\"react-router-dom\";import{useState}from\"react\";import axios from'axios';import{toast}from'react-hot-toast';import{useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CarAdd=_ref=>{let{car,isFavourite:stateFavourite}=_ref;const[auth,jePrihlasen]=useState(false);const[isFavourite,setIsFavourite]=useState(stateFavourite);useEffect(()=>{axios.get('http://localhost:3001/check',{withCredentials:true}).then(res=>{if(res.data.Status===\"Success\"){jePrihlasen(true);}else{jePrihlasen(false);}});},[]);const handleHeartClick=async e=>{e.preventDefault();e.stopPropagation();if(!auth){toast.error(\"Musíte se nejdříve přihlásit.\");return;}try{if(!isFavourite){await axios.post('http://localhost:3001/favor',{carId:car.id,cena:car.cena},{withCredentials:true});toast.success(`${car.nazev} byl přidán do oblíbených.`);}else{await axios.delete(`http://localhost:3001/favor/${car.id}`,{withCredentials:true});toast.success(`${car.nazev} byl odebrán z oblíbených.`);}setIsFavourite(!isFavourite);}catch(err){console.error(\"Error updating favourites:\",err);}};return/*#__PURE__*/_jsx(Link,{to:`/car/${car.id}`,style:{textDecoration:'none',color:'inherit'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-5 align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xl-4 col-lg-4 col-sm-12\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"auto\",className:\"img-fluid\",src:car.obrazek})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-7 col-xl-5 col-lg-4 col-sm-8 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{border:'none',width:'100%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",style:{textAlign:'left'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title fw-bold mb-3\",children:car.nazev}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle fw-semibold mb-3\",children:[car.rok_vyroby,\", \",Number(car.najete_km).toLocaleString('cs-CZ'),\" Km\"]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-3\",children:[car.vykon_kw,\" kW (\",Math.round(car.vykon_kw*1.341),\" ps)\"]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-3\",children:[car.karoserie,\", \",car.palivo,\", \",car.prevodovka]}),/*#__PURE__*/_jsxs(\"h6\",{className:\"card-subtitle mb-3\",children:[\"Lokace: \",car.kraj,\" kraj\"]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-xl-3 col-lg-4 col-sm-4 d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{border:'none',width:'100%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title fw-bold\",style:{color:car.stav==='Aktivní'?'green':car.stav==='Rezervovaný'?'orange':car.stav==='Zrušený'?'red':'black'},children:car.stav}),/*#__PURE__*/_jsxs(\"h5\",{className:\"card-subtitle fw-semibold\",style:{marginBottom:70},children:[Number(car.cena).toLocaleString('cs-CZ'),\" K\\u010D\"]}),/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"40\",height:\"40\",fillRule:\"currentColor\",className:\"bi bi-heart\",viewBox:\"0 0 16 16\",fill:isFavourite?\"red\":\"currentColor\",onClick:handleHeartClick,style:{cursor:'pointer'},children:/*#__PURE__*/_jsx(\"path\",{d:\"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\"})})]})})})]})});};export default CarAdd;","map":{"version":3,"names":["React","Link","useState","axios","toast","useEffect","jsx","_jsx","jsxs","_jsxs","CarAdd","_ref","car","isFavourite","stateFavourite","auth","jePrihlasen","setIsFavourite","get","withCredentials","then","res","data","Status","handleHeartClick","e","preventDefault","stopPropagation","error","post","carId","id","cena","success","nazev","delete","err","console","to","style","textDecoration","color","children","className","alt","src","obrazek","border","width","textAlign","rok_vyroby","Number","najete_km","toLocaleString","vykon_kw","Math","round","karoserie","palivo","prevodovka","kraj","stav","marginBottom","xmlns","height","fillRule","viewBox","fill","onClick","cursor","d"],"sources":["C:/Users/denny/Documents/GitHub/Rocnikova_Prace/client/src/components/CarAdd.js"],"sourcesContent":["import React from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport axios from 'axios';\r\nimport { toast } from 'react-hot-toast';\r\nimport { useEffect } from 'react'; \r\n\r\nconst CarAdd = ({ car, isFavourite: stateFavourite }) => {\r\n  const [auth, jePrihlasen] = useState(false);\r\n  const [isFavourite, setIsFavourite] = useState(stateFavourite);\r\n\r\n  useEffect(() => {\r\n      axios.get('http://localhost:3001/check', { withCredentials: true })\r\n        .then(res => {\r\n          if (res.data.Status === \"Success\") {\r\n            jePrihlasen(true);\r\n          } else {\r\n            jePrihlasen(false);\r\n          }\r\n        })\r\n    }, []);\r\n\r\nconst handleHeartClick = async (e) => {\r\n  e.preventDefault();\r\n  e.stopPropagation();\r\n\r\n  if (!auth) {\r\n    toast.error(\"Musíte se nejdříve přihlásit.\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    if (!isFavourite) {\r\n      await axios.post('http://localhost:3001/favor', { carId: car.id, cena: car.cena }, { withCredentials: true });\r\n      toast.success(`${car.nazev} byl přidán do oblíbených.`);\r\n    } else {\r\n      await axios.delete(`http://localhost:3001/favor/${car.id}`, { withCredentials: true });\r\n      toast.success(`${car.nazev} byl odebrán z oblíbených.`);\r\n    }\r\n    setIsFavourite(!isFavourite);\r\n  } catch (err) {\r\n    console.error(\"Error updating favourites:\", err);\r\n  }\r\n};\r\n    return (\r\n      <Link to={`/car/${car.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n      <div className='row mb-5 align-items-center'>\r\n        <div className='col-12 col-xl-4 col-lg-4 col-sm-12'>\r\n          <img alt='auto' className='img-fluid' src={car.obrazek}/>\r\n        </div>\r\n        <div className=\"col-7 col-xl-5 col-lg-4 col-sm-8 d-flex justify-content-center\">\r\n          <div className=\"card\" style={{ border: 'none', width: '100%' }}>\r\n            <div className=\"card-body\" style={{ textAlign: 'left' }}>\r\n              <h4 className=\"card-title fw-bold mb-3\">{car.nazev}</h4>\r\n              <h6 className=\"card-subtitle fw-semibold mb-3\">{car.rok_vyroby}, {Number(car.najete_km).toLocaleString('cs-CZ')} Km</h6>\r\n              <h6 className=\"card-subtitle mb-3\">{car.vykon_kw} kW ({Math.round(car.vykon_kw * 1.341)} ps)</h6>\r\n              <h6 className=\"card-subtitle mb-3\">{car.karoserie}, {car.palivo}, {car.prevodovka}</h6>\r\n              <h6 className=\"card-subtitle mb-3\">Lokace: {car.kraj} kraj</h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className='col-5 col-xl-3 col-lg-4 col-sm-4 d-flex justify-content-center'>\r\n          <div className=\"card\" style={{ border: 'none', width: '100%' }}>\r\n            <div className=\"card-body\" style={{ textAlign: 'right' }}>\r\n              <h4 className=\"card-title fw-bold\" style={{ color: car.stav === 'Aktivní' ? 'green' : car.stav === 'Rezervovaný' ? 'orange' : car.stav === 'Zrušený' ? 'red' : 'black' }}>{car.stav}</h4>\r\n              <h5 className=\"card-subtitle fw-semibold\" style={{ marginBottom: 70 }}>{Number(car.cena).toLocaleString('cs-CZ')} Kč</h5>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" fillRule=\"currentColor\" className=\"bi bi-heart\" viewBox=\"0 0 16 16\" fill={isFavourite ? \"red\" : \"currentColor\"} onClick={handleHeartClick} style={{ cursor: 'pointer' }}>\r\n                <path d=\"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </Link>\r\n    );\r\n  };\r\nexport default CarAdd;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}